# installing R packages 
install.packages("tidyverse")
install.packages("sf")
install.packages("rnaturalearth")
install.packages("countrycode")
install.packages("ggrepel")

 #loading R packages
library("tidyverse")
library("sf")
library("rnaturalearth")
library("rnaturalearth")
library("countrycode")
library("ggrepel")

# getting world data

world <- ne_countries(scale = "small", returnclass = "sf")

#plotting empty world map
world %>%
  ggplot() +
  geom_sf()

#changing map projection

#projection list: https://proj.org/operations/projections/
world %>%
  st_transform(crs = "+proj=robin") %>%
  ggplot() + 
  geom_sf() +
  theme_minimal()

#bruh fixing issues 
world %>%
  st_transform(crs = "+proj=wintri") %>%
  ggplot() +
  geom_sf() +
  coord_sf(datum = NA) + 
  theme_minimal()

#data wrangling 
vaccination_mortality_df <- read_csv("vaccination_mortality_df.csv")
data <- vaccination_mortality_df %>%
  select(Country, AboveAvgVaccination) %>%
  separate_rows(AboveAvgVaccination, sep = ", ") %>%


#add iso3 country code
data_with_iso <- data %>%
  mutate(Iso3= countrycode::countrycode(
    sourcevar = AboveAvgVaccination, 
    origin = "country.name", 
    destination = "iso3c")
  )


data <- data %>%
  mutate(
    column = for(coun in Country) {
      countrycode(coun, origin = 'country.name', destination = 'iso3c')
    } 
  )
 

#ignore
countrycode('Afghanistan', origin = 'country.name', destination = 'iso3c')
